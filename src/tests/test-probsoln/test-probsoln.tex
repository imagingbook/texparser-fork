\documentclass{article}

\usepackage[answers,usedefaultargs]{probsoln}

\begin{defproblem}[1][{2}]{diffsin}
Differentiate $f(x)=\sin(#1x)$.
\begin{onlysolution}
 \begin{solution}
 $f'(x) = #1\cos(#1x)$.
 \end{solution}
\end{onlysolution}
\end{defproblem}

\newproblem[1][{4}]{diffcos}{%
  \(f(x) = \cos(#1x)\)
}%
{%
  \(f'(x) = -#1\sin(#1x)\)
}

\newproblem*{essay}{An essay style question without an answer.}

\begin{defproblem}{subparts}
Find $x$ in:
\begin{textenum}
\item $4+x=2$;
\item $3x=9$;
\item $x-1=4$.
\end{textenum}
\begin{onlysolution}
 \begin{solution}
  \begin{textenum}
  \item $x=-2$;
  \item $x=3$;
  \item $x=5$.
  \end{textenum}
 \end{solution}
\end{onlysolution}
\end{defproblem}

\begin{document}

\begin{enumerate}
\item \useproblem{diffsin}{3}

\item \useproblem{diffcos}{8}

\item \useproblem{essay}

\item \useproblem{subparts}
\end{enumerate}

Iterate:
\begin{enumerate}
\foreachproblem{\item \thisproblem}
\end{enumerate}
\end{document}
